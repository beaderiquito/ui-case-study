<main>
    
    <div class = "cart-page container-md">
        
        <!--Display number of items in cart-->
        <div class = "container">
            <h3 class="title"> <img class="cart-svg" src="../../assets/img/cart3.svg" width="40"> MY CART ({{cart.length}})</h3>
        </div>

        <!--Show all items of cart-->
        <div class= "row product-card" *ngFor="let product of cart; let index = index">
            
            <!--Product Picture-->
            <div class = "col col-md-4 product-img" > 
                <img src="{{product[4]}}">
            </div>

            <!--Added to Cart Quantity-->
            <div class = "col col-md-4 product-info">
                <h5 class="product-name">{{product[1]}}</h5>
                <p>{{toCurrency.format(product[2])}}</p>
                <label>Quantity: {{product[3]}} <a routerLink="../products/product-details/{{product[0]}}"><img class="edit-svg" src="../../assets/img/edit.svg" width="24"></a></label>
            </div>

            <!--Delete Button and Subtotal-->
            <div class = "col col-md-4 end-column">
                <div class="row delete-row">
                    <button type="button" class="btn delete-btn" (click)="confirmationMessage(deleteConfirmation)">
                        <img class="delete-svg" src="../../assets/img/trash-fill.svg" width="25"> DELETE
                    </button>
                </div>
                <div class="row subtotal-row">
                    <p class="subtotal">Subtotal: {{toCurrency.format(product[2] * product[3])}}</p>
                </div>
            </div>

            <!--Delete Confirmation-->
            <ng-template #deleteConfirmation>
                <div class="modal-body">
                  <p>Do you want to delete this item?</p>
                  <button type="button" class="btn btn-lg template-btn" (click)="deleteProduct(index)" >YES</button>
                  <button type="button" class="btn btn-lg template-btn ml-2" (click)="decline()" >NO</button>
                </div>
            </ng-template>
            
        </div>

        
        
        <!--Show messsage that cart is empty-->
        <div class="empty-cart" [class.visible] = "cart.length>0">
            
            <div class="content">
                <img class="cart-svg" src="../../assets/img/cart3.svg" width="100">
            </div>

            <div class="content">
                <h2>YOUR CART IS EMPTY</h2>  
            </div>

            <div class="content">
                <h4>We bake it right!</h4>    
            </div>

            <div class="content">
            <button type="button" class="btn btn-lg template-btn" routerLink=""> START SHOPPING </button> 
            </div>

        </div>

        <!--Cart Total-->
        <div class="row">

            <div class="col-12" [class.visible] = "cart.length<1">
                <h5 class="total">TOTAL: {{toCurrency.format(total)}}</h5>  
            </div>

        </div>

        <!--Checkout-->
        <div class="row checkout-row" [class.visible] = "cart.length<1">
            <button type="button" class="btn btn-lg checkout-btn" (click)="checkOut(template)">CHECKOUT</button>
        </div>

        <!--Checkout Modal-->
        <ng-template #template>
        
            <div class="modal-body">
                <div class="content">
                    <img class="checkout-svg" src="../../assets/img/gift-fill.svg" width="100">
                </div>
                <h4 class="modal-title pull"> Thank you for your puchase!</h4>
                <div class="row checkout-row">
                    <button type="button" class="btn btn-lg homepage-btn" routerLink="" (click)="hide()">GO BACK TO MAIN PAGE</button>
                </div>
            </div>
          </ng-template>
    </div>

    


    
    

</main>